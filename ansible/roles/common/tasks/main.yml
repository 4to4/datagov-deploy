---
- name: get information on newest versions of packages and their dependencies
  apt: update_cache=yes

- name: make sure packages are installed
  action: apt pkg={{item}} state=installed
  with_items:
    - htop
    - atool
    - ruby
    - python-virtualenv
    - python-setuptools
    - git
    - python-dev
    - ruby-dev
    - postgresql-client
    - bison
    - apache2
    - libapache2-mod-wsgi
    - python-pip
    - python-psycopg2
    - redis-server
    - libgeos-c1
    - libxml2-dev
    - libxslt1-dev
    - lib32z1-dev

  - name: get pip
    action: easy_install name=https://pypi.python.org/packages/source/p/pip/pip-1.3.1.tar.gz

  - name: create ckan virtualenv
    action: command virtualenv /usr/lib/ckan --system-site-packages
